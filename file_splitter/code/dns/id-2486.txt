//----- (000000014012C354) ----------------------------------------------------
__int64 __fastcall std::operator<<<unsigned short,std::char_traits<unsigned short>>(__int64 a1, _BYTE *a2)
{
  int v3; // esi
  __int64 v4; // r12
  __int64 v5; // r14
  __int64 v6; // r14
  __int64 *v7; // rax
  unsigned __int16 *v8; // rdx
  __int64 v9; // rcx
  unsigned __int16 v10; // r8
  __int64 v11; // rcx
  int v12; // edx
  _WORD **v13; // rcx
  unsigned __int16 v14; // r8
  __int64 v15; // rcx
  int v16; // edx
  _WORD **v17; // rcx
  __int64 v18; // rcx
  unsigned __int16 v19; // r8
  __int64 v20; // rcx
  int v21; // edx
  _WORD **v22; // rcx
  unsigned __int16 *v23; // rdx
  __int64 v24; // rcx
  int v25; // edx
  __int64 v26; // rcx
  _QWORD *v28; // [rsp+20h] [rbp-58h]
  __int64 v29; // [rsp+30h] [rbp-48h] BYREF
  char v30; // [rsp+38h] [rbp-40h]
  _BYTE *v31; // [rsp+88h] [rbp+10h]
  __int64 v32; // [rsp+98h] [rbp+20h] BYREF

  v31 = a2;
  v3 = 0;
  v4 = -1i64;
  do
    ++v4;
  while ( a2[v4] );
  v5 = *(_QWORD *)(*(int *)(*(_QWORD *)a1 + 4i64) + a1 + 40);
  if ( v5 <= 0 || v5 <= v4 )
    v6 = 0i64;
  else
    v6 = v5 - v4;
  std::basic_ostream<unsigned short>::sentry::sentry((__int64)&v29, a1);
  if ( v30 )
  {
    v7 = std::ios_base::getloc(a1 + *(int *)(*(_QWORD *)a1 + 4i64), &v32);
    v28 = std::use_facet<std::ctype<unsigned short>>(v7);
    std::locale::~locale((std::locale *)&v32);
    v8 = (unsigned __int16 *)*(int *)(*(_QWORD *)a1 + 4i64);
    if ( (*(_DWORD *)((_BYTE *)v8 + a1 + 24) & 0x1C0) == 64 )
      goto LABEL_20;
    while ( 1 )
    {
      if ( v6 <= 0 )
        goto LABEL_20;
      v9 = *(int *)(*(_QWORD *)a1 + 4i64);
      v10 = *(_WORD *)(v9 + a1 + 88);
      v11 = *(_QWORD *)(v9 + a1 + 72);
      v12 = **(_QWORD **)(v11 + 72) ? **(_DWORD **)(v11 + 96) : 0;
      if ( v12 <= 0 )
      {
        v10 = (*(__int64 (__fastcall **)(__int64, _QWORD))(*(_QWORD *)v11 + 24i64))(v11, v10);
      }
      else
      {
        --**(_DWORD **)(v11 + 96);
        v13 = *(_WORD ***)(v11 + 72);
        v8 = (*v13)++;
        *v8 = v10;
      }
      if ( v10 == 0xFFFF )
        break;
      --v6;
    }
    v3 = 4;
LABEL_20:
    while ( !v3 )
    {
      if ( v4 <= 0 )
      {
        while ( v6 > 0 )
        {
          v18 = *(int *)(*(_QWORD *)a1 + 4i64);
          v19 = *(_WORD *)(v18 + a1 + 88);
          v20 = *(_QWORD *)(v18 + a1 + 72);
          if ( **(_QWORD **)(v20 + 72) )
            v21 = **(_DWORD **)(v20 + 96);
          else
            v21 = 0;
          if ( v21 <= 0 )
          {
            v19 = (*(__int64 (__fastcall **)(__int64, _QWORD))(*(_QWORD *)v20 + 24i64))(v20, v19);
          }
          else
          {
            --**(_DWORD **)(v20 + 96);
            v22 = *(_WORD ***)(v20 + 72);
            v23 = (*v22)++;
            *v23 = v19;
          }
          if ( v19 == 0xFFFF )
          {
            v3 = 4;
            goto LABEL_41;
          }
          --v6;
        }
        break;
      }
      LOBYTE(v8) = *v31;
      v14 = (*(__int64 (__fastcall **)(_QWORD *, unsigned __int16 *))(*v28 + 80i64))(v28, v8);
      v15 = *(_QWORD *)(*(int *)(*(_QWORD *)a1 + 4i64) + a1 + 72);
      if ( **(_QWORD **)(v15 + 72) )
        v16 = **(_DWORD **)(v15 + 96);
      else
        v16 = 0;
      if ( v16 <= 0 )
      {
        v14 = (*(__int64 (__fastcall **)(__int64, _QWORD))(*(_QWORD *)v15 + 24i64))(v15, v14);
      }
      else
      {
        --**(_DWORD **)(v15 + 96);
        v17 = *(_WORD ***)(v15 + 72);
        v8 = (*v17)++;
        *v8 = v14;
      }
      if ( v14 == 0xFFFF )
        v3 = 4;
      --v4;
      ++v31;
    }
LABEL_41:
    *(_QWORD *)(*(int *)(*(_QWORD *)a1 + 4i64) + a1 + 40) = 0i64;
  }
  else
  {
    v3 = 4;
  }
  v24 = a1 + *(int *)(*(_QWORD *)a1 + 4i64);
  if ( v3 )
  {
    v25 = v3 | *(_DWORD *)(v24 + 16);
    if ( !*(_QWORD *)(v24 + 72) )
      LOBYTE(v25) = v25 | 4;
    std::ios_base::clear((std::ios_base *)v24, v25, 0);
  }
  if ( !std::uncaught_exception() )
    std::basic_ostream<unsigned short>::_Osfx(v29);
  v26 = *(_QWORD *)(*(int *)(*(_QWORD *)v29 + 4i64) + v29 + 72);
  if ( v26 )
    (*(void (__fastcall **)(__int64))(*(_QWORD *)v26 + 16i64))(v26);
  return a1;
}
// 14012C354: could not find valid save-restore pair for rbp
// 14012C4C8: variable 'v8' is possibly undefined
// 140185140: using guessed type __int64 (__fastcall *_guard_dispatch_icall_fptr)(_QWORD, _QWORD);

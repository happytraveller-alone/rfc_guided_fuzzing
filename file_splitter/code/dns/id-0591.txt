//----- (0000000140055AB8) ----------------------------------------------------
signed __int32 __fastcall FastMutex_Release(__int64 a1)
{
  signed __int32 result; // eax
  signed __int32 v3; // ett

  result = GetCurrentThreadId();
  if ( *(_DWORD *)(a1 + 4) == result )
  {
    *(_DWORD *)(a1 + 4) = 0;
    result = *(_DWORD *)a1;
    if ( *(int *)a1 < 0 )
    {
      while ( 1 )
      {
        v3 = result;
        result = _InterlockedCompareExchange((volatile signed __int32 *)a1, result & 0x7FFFFFFF, result);
        if ( v3 == result )
          break;
        if ( (result & 0x80000000) == 0 )
          return result;
      }
      if ( (result & 0x7FFFFFFF) != 0 )
        return SetEvent(*(HANDLE *)(a1 + 8));
    }
  }
  return result;
}

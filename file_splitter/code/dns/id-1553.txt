//----- (00000001400C43B4) ----------------------------------------------------
DWORD __fastcall Zone_PrepareForLoad(__int64 a1)
{
  CDnsClientSubnetRecordsTrie *v2; // rcx
  int v3; // edi
  _QWORD *v4; // rax
  __int64 v5; // rdx
  _QWORD *v6; // rax
  bool v7; // zf
  _BYTE *v8; // rax
  DWORD result; // eax

  v2 = WPP_GLOBAL_Control;
  if ( WPP_GLOBAL_Control != (CDnsClientSubnetRecordsTrie *)&WPP_GLOBAL_Control
    && (*((_BYTE *)WPP_GLOBAL_Control + 68) & 0x10) != 0
    && *((_BYTE *)WPP_GLOBAL_Control + 65) >= 4u )
  {
    WPP_SF_s(
      *((_QWORD *)WPP_GLOBAL_Control + 7),
      0x58u,
      (__int64)&WPP_e9a0d5dea449334d7c383477da81f939_Traceguids,
      *(const char **)(a1 + 16));
    v2 = WPP_GLOBAL_Control;
  }
  v3 = 0;
  v4 = (_QWORD *)(a1 + 88);
  v5 = 3i64;
  do
  {
    if ( !*v4 )
      ++v3;
    v4 += 2;
    --v5;
  }
  while ( v5 );
  if ( v2 != (CDnsClientSubnetRecordsTrie *)&WPP_GLOBAL_Control
    && (*((_BYTE *)v2 + 68) & 0x10) != 0
    && *((_BYTE *)v2 + 65) >= 4u )
  {
    WPP_SF_Ds(
      *((_QWORD *)v2 + 7),
      0xAu,
      (__int64)&WPP_e9a0d5dea449334d7c383477da81f939_Traceguids,
      v3,
      *(_QWORD *)(a1 + 16));
    v2 = WPP_GLOBAL_Control;
  }
  if ( *(_QWORD *)(a1 + 72) || !v3 )
  {
    if ( v2 != (CDnsClientSubnetRecordsTrie *)&WPP_GLOBAL_Control
      && (*((_BYTE *)v2 + 68) & 0x10) != 0
      && *((_BYTE *)v2 + 65) >= 4u )
    {
      WPP_SF_sDq(
        *((_QWORD *)v2 + 7),
        0x59u,
        (__int64)&WPP_e9a0d5dea449334d7c383477da81f939_Traceguids,
        *(const char **)(a1 + 16));
    }
    return 9607;
  }
  else
  {
    v6 = NTree_InitializeEx(0);
    v7 = *(_DWORD *)(a1 + 372) == 0;
    *(_QWORD *)(a1 + 72) = v6;
    if ( v7 )
    {
      *(_QWORD *)(a1 + 64) = v6;
      *(_QWORD *)(a1 + 80) = v6;
      *((_DWORD *)v6 + 23) |= 0x10u;
LABEL_22:
      if ( !*(_QWORD *)(a1 + 192) )
        _InterlockedIncrement(&dword_1401C7B70);
      return 0;
    }
    v6[7] = a1;
    *((_BYTE *)v6 + 96) = 16;
    v8 = Lookup_ZoneNode(a1, (unsigned __int8 *)(*(_QWORD *)(a1 + 32) + 2i64), 0i64, 0i64, 272, 0i64, 0i64, 0i64);
    if ( v8 )
    {
      *((_DWORD *)v8 + 23) |= 0x110u;
      v8[96] = -14;
      *(_QWORD *)(a1 + 64) = v8;
      *(_QWORD *)(a1 + 80) = v8;
      goto LABEL_22;
    }
    result = GetLastError();
    if ( !result )
      return 123;
  }
  return result;
}
// 1401C7B70: using guessed type int dword_1401C7B70;

//----- (000000014007EE7C) ----------------------------------------------------
__int64 __fastcall RpcUtil_FindVirtualizationInstance(const wchar_t *a1, __int64 *a2)
{
  __int64 v4; // rsi
  unsigned int v5; // edi
  unsigned int VirtualInstance; // eax
  CDnsClientSubnetRecordsTrie *v7; // rcx
  __int64 v9; // [rsp+50h] [rbp+8h] BYREF

  v9 = 0i64;
  v4 = 0i64;
  v5 = 0;
  if ( !a1 )
    goto LABEL_10;
  if ( !*a1 )
    goto LABEL_10;
  if ( !_wcsicmp(a1, L".") )
    goto LABEL_10;
  if ( g_pVirtualizationManager )
  {
    VirtualInstance = Dns_FindVirtualInstance((__int64)a1, &v9);
    v4 = v9;
    v5 = VirtualInstance;
    if ( v9 )
      goto LABEL_10;
  }
  v5 = 9922;
  v7 = WPP_GLOBAL_Control;
  if ( WPP_GLOBAL_Control != (CDnsClientSubnetRecordsTrie *)&WPP_GLOBAL_Control
    && (*((_BYTE *)WPP_GLOBAL_Control + 68) & 4) != 0
    && *((_BYTE *)WPP_GLOBAL_Control + 65) >= 4u )
  {
    WPP_SF_S(*((_QWORD *)WPP_GLOBAL_Control + 7), 0x35u, (__int64)&WPP_ba1772ab8ae33e60555253e1dffe9548_Traceguids, a1);
LABEL_10:
    v7 = WPP_GLOBAL_Control;
  }
  if ( a2 )
    *a2 = v4;
  if ( v7 != (CDnsClientSubnetRecordsTrie *)&WPP_GLOBAL_Control
    && (*((_BYTE *)v7 + 68) & 4) != 0
    && *((_BYTE *)v7 + 65) >= 4u )
  {
    WPP_SF_Sdq(*((_QWORD *)v7 + 7), 0x36u, (__int64)&WPP_ba1772ab8ae33e60555253e1dffe9548_Traceguids, a1);
  }
  return v5;
}
// 1401B9270: using guessed type struct CDnsVirtualizationManager *g_pVirtualizationManager;

//----- (000000014012DCF0) ----------------------------------------------------
__int64 __fastcall std::basic_streambuf<unsigned short>::xsputn(__int64 a1, unsigned __int16 *a2, __int64 a3)
{
  __int64 v3; // rsi
  __int64 v4; // rdi
  void *v7; // r9
  int v8; // ecx
  __int64 v9; // r14

  v3 = 0i64;
  v4 = a3;
  while ( v4 > 0 )
  {
    v7 = **(void ***)(a1 + 72);
    if ( v7 )
      v8 = **(_DWORD **)(a1 + 96);
    else
      v8 = 0;
    v9 = v8;
    if ( v8 <= 0 )
    {
      if ( (*(unsigned __int16 (__fastcall **)(__int64, _QWORD))(*(_QWORD *)a1 + 24i64))(a1, *a2) == 0xFFFF )
        return v3;
      ++a2;
      ++v3;
      --v4;
    }
    else
    {
      if ( v4 < v8 )
        v9 = v4;
      memcpy_0(v7, a2, 2 * v9);
      a2 += v9;
      v3 += v9;
      v4 -= v9;
      **(_DWORD **)(a1 + 96) -= v9;
      **(_QWORD **)(a1 + 72) += 2i64 * (int)v9;
    }
  }
  return v3;
}
// 140185140: using guessed type __int64 (__fastcall *_guard_dispatch_icall_fptr)(_QWORD, _QWORD);

//----- (00000001400E88B0) ----------------------------------------------------
__int64 __fastcall std::getline<char,std::char_traits<char>,std::allocator<char>>(
        __int64 a1,
        size_t *a2,
        unsigned __int8 a3)
{
  int v6; // ebx
  char v7; // si
  __int64 v9; // rcx
  __int64 v10; // rdx
  unsigned __int8 *v11; // r8
  int v12; // ecx
  int i; // eax
  __int64 v14; // rcx
  int v15; // edx
  __int64 v16; // rcx
  int v17; // edx
  __int64 v18; // rcx

  v6 = 0;
  v7 = 0;
  v9 = *(_QWORD *)(*(int *)(*(_QWORD *)a1 + 4i64) + a1 + 72);
  if ( v9 )
    std::_Mutex::_Lock((LPCRITICAL_SECTION *)(v9 + 8));
  if ( !std::istream::_Ipfx(a1) )
    goto LABEL_23;
  std::string::erase(a2, 0i64, 0xFFFFFFFFFFFFFFFFui64);
  v10 = *(_QWORD *)(*(int *)(*(_QWORD *)a1 + 4i64) + a1 + 72);
  v11 = **(unsigned __int8 ***)(v10 + 64);
  v12 = v11 ? **(_DWORD **)(v10 + 88) : 0;
  for ( i = v12 <= 0 ? (*(__int64 (__fastcall **)(__int64))(*(_QWORD *)v10 + 48i64))(v10) : *v11;
        ;
        i = std::streambuf::snextc(*(_QWORD *)(*(int *)(*(_QWORD *)a1 + 4i64) + a1 + 72)) )
  {
    if ( i == -1 )
    {
      v6 = 1;
      goto LABEL_22;
    }
    if ( i == a3 )
      break;
    if ( a2[2] >= 0xFFFFFFFFFFFFFFFEui64 )
    {
      v6 = 2;
      goto LABEL_22;
    }
    std::string::append(a2, 1ui64, i);
    v7 = 1;
  }
  v7 = 1;
  v14 = *(_QWORD *)(*(int *)(*(_QWORD *)a1 + 4i64) + a1 + 72);
  v15 = **(_QWORD **)(v14 + 64) ? **(_DWORD **)(v14 + 88) : 0;
  if ( v15 <= 0 )
  {
    (*(void (__fastcall **)(__int64))(*(_QWORD *)v14 + 56i64))(v14);
  }
  else
  {
    --**(_DWORD **)(v14 + 88);
    ++**(_QWORD **)(v14 + 64);
  }
LABEL_22:
  if ( !v7 )
LABEL_23:
    v6 |= 2u;
  v16 = a1 + *(int *)(*(_QWORD *)a1 + 4i64);
  if ( v6 )
  {
    v17 = v6 | *(_DWORD *)(v16 + 16);
    if ( !*(_QWORD *)(v16 + 72) )
      LOBYTE(v17) = v17 | 4;
    std::ios_base::clear((std::ios_base *)v16, v17, 0);
  }
  v18 = *(_QWORD *)(*(int *)(*(_QWORD *)a1 + 4i64) + a1 + 72);
  if ( v18 )
    std::_Mutex::_Unlock((LPCRITICAL_SECTION *)(v18 + 8));
  return a1;
}
// 1400E88B0: could not find valid save-restore pair for rbp
// 140185140: using guessed type __int64 (__fastcall *_guard_dispatch_icall_fptr)(_QWORD, _QWORD);
